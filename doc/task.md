# 居民用电分析系统 - 开发任务清单

> **版本**: 2.0  
> **更新日期**: 2025年12月27日  
> **说明**: 任务按依赖顺序排列，先完成各模块函数，再进行后端与前端设计

---

## 📋 阶段0：依赖对齐（基于已安装包）

- [x] 后端依赖范围确认：Robyn、Pandas/NumPy、scikit-learn、Matplotlib/Seaborn/Pyecharts、torch/torchvision/torchaudio、WeasyPrint/Openpyxl/python-docx、APScheduler、LangChain/OpenAI/Anthropic/Ollama、h5py/hdf5plugin
- [x] 前端依赖范围确认：React/TypeScript/Vite、Ant Design、ECharts/echarts-for-react、Axios

---

## 📋 阶段1：数据集与数据规范（后续模块前置）

- [x] 选择公开数据集或自采数据来源
- [ ] 理解原始字段、采样频率与缺失情况
- [ ] 定义统一输入数据格式（时间戳、用电量）
- [ ] 确定数据导入与模拟数据的输入输出规范
- [ ] 规划数据存储方案（SQLite + 文件系统）与目录结构
- [ ] 设计SQLite表结构（数据集、会话、缓存元数据）
- [ ] 配置SQLite WAL模式（支持并发读写）

---

## 📋 阶段2：数据导入与预处理函数

- [ ] CSV/Excel 读取函数
- [ ] 数据格式校验函数
- [ ] 缺失值与异常值处理函数
- [ ] 时间序列对齐与标准化函数
- [ ] 数据持久化与查询函数

---

## 📋 阶段3：统计分析与特征函数

- [ ] 统计指标计算函数（总量、日均、峰谷、趋势）
- [ ] 负荷曲线与特征向量提取函数
- [ ] 行为分类基础函数（规则或 K-Means）

---

## 📋 阶段4：深度学习与异常检测函数

- [ ] 数据集划分与增强流程函数
- [ ] LSTM 行为分类训练与推理函数
- [ ] Autoencoder 训练与异常评分函数
- [ ] 异常阈值与告警触发判定函数

---

## 📋 阶段5：可视化与报告函数

- [ ] 图表数据生成函数（供前端或后端渲染）
- [ ] 后端图表渲染函数（如需生成图片）
- [ ] 报告导出函数（PDF/Excel/Docx）

---

## 📋 阶段6：节能建议与模拟数据函数

- [ ] 规则化节能建议生成函数
- [ ] 模拟用电数据生成函数（多行为模式）
- [ ] 定时任务调度函数（数据定时生成与发送）

---

## 📋 阶段7：LLM Agent 函数

- [ ] 上下文构建与多轮对话管理函数
- [ ] 多后端 LLM 调用与切换函数
- [ ] 建议生成与答案整理函数

---

## 📋 阶段8：后端 API 与服务集成（在函数完成后）

- [ ] Robyn 应用与路由结构搭建
- [ ] 数据上传、统计分析、图表、报告导出接口
- [ ] 模型推理与异常检测接口
- [ ] 告警配置与历史接口
- [ ] 模拟器控制接口
- [ ] Agent 对话接口
- [ ] 日志、错误处理、CORS、性能优化

---

## 📋 阶段9：前端设计与实现（在 API 稳定后）

- [ ] 前端工程与路由/状态管理配置
- [ ] 数据上传与进度反馈页面
- [ ] 仪表盘页面（曲线/饼图/指标卡片）
- [ ] 报告下载与历史查看
- [ ] 告警配置与历史页面
- [ ] 智能问答页面与流式展示
- [ ] 响应式与交互优化

---

## 📋 阶段10：联调、测试与优化

- [ ] 端到端联调（上传→分析→可视化→导出）
- [ ] 模型推理性能与准确率验证
- [ ] 告警与模拟器联调验证
- [ ] 并发与响应时间优化
- [ ] 基础安全与异常场景验证

---

## 📋 阶段11：文档、部署与答辩

- [ ] API 与用户使用文档
- [ ] 训练与部署说明（含SQLite备份/恢复指南）
- [ ] 演示数据与演示脚本
- [ ] 论文结构与关键章节撰写
- [ ] 答辩材料准备
